# [**Craig RPG Audio Transcriber & Story Summarizer**](https://github.com/CyrilFrancois/discordGraig2Summary)

This project automates the entire pipeline for converting Discord roleplay recordings (from [**Craig**](https://craig.chat/)) into clean transcripts and narrative summaries.
Drop your donwloaded ZIP file (.AAC) in the audio folder, run the script, and the system produces a structured, story-driven summary based on your own game context and custom instructions.

The pipeline is fully customizable, language-aware, and supports personalized prompting for different narrative styles.

**Tags:** python, rpg, automation, discord, summarization, transcription, whisper, llm, craig-bot

---
## Requirements
- [Python 3.10+](https://www.python.org/downloads/) and dependancies (listed in the imports of both scripts: espcially pydub, openai, ffmpeg (and add to PATH), thanks ```bash pip install [imported lib] ```)
- Your own [OpenAI/ChatGPT API key](https://platform.openai.com/docs/quickstart/step-2-set-up-your-api-key) (set in `.env`)
- Mandatory environment variables in `.env`:
  - `OPENAI_API_KEY=...`
  - `TARGET_LANG=fr` or `TARGET_LANG=en` (or any target language)
  - `SPEAKER_MAP={"discordPseudo0#0": "DM", "discordPseudo1#0": "RPname1", "discordPseudo2#0": "RPname2",...}`
- A properly filled `0. gameinfo/` folder with the three context files
- 
**-> I’ve already provided example game info files and a sample audio recording, so you can simply run the code as-is.**
  
And you're good to go :
```bash
python ./main.py
```

---

## How It Works

1. **Record the session** using [**Craig**](https://craig.chat/) in Discord.  
2. **Download the ZIP file (.AAC)** from Craig and place it into the `1. audio/` folder.
3. **Run `audioToTranscript.py`** to generate a complete transcript.  
4. **Ensure that `0. gameInfo/Context.txt` and `0. gameInfo/SummaryFromStory.txt` are up to date.**  
5. **Run `transcriptToSummary.py`** to create a cleaned, concise summary (requires the game info files and optionally previous summaries in `3. summaries/`).  
6. The final summary is stored in `3. summaries/`.

Alternatively, you can just **run `main.py`** to execute both scripts automatically (3 to 5).

---

## Details

## `0. gameinfo/`
The `0. gameinfo/` directory contains three key files that control the pipeline’s behavior.

### 1. `0. gameinfo/Context.txt`
Write anything that describes the world, lore, characters, or general context of the game.  
This file can be empty, but richer context makes translations and summaries far more accurate.

### 2. `0. gameinfo/SummaryFromStory.txt`
A running recap of the story so far.  
You should sometimes update it as the game progresses.  
The pipeline uses this to maintain continuity and avoid contradictions.

### 3. `0. gameinfo/Prompt.txt`
A prompt sent to ChatGPT to control how summaries and translations are generated.  
This file must be written in the target language.  
You can fully personalize style, tone, constraints, or narrative voice.

Simple examples:
- Summaries written as if by Victor Hugo
- Medieval-style dialogue translation
- Concise or extended retellings

This flexibility lets you customize the pipeline to get the exact narrative style you want.

## `1. audio/`
Drop the .AAC zip files you get from [Craig](https://craig.chat/) here. Only the most recently added ZIP file will be processed by the pipeline.

<p align="left">
  <img src="1. audio/whichCraigAudio.png" width="400">
</p>

## `2. transcripts/`
This folder stores all generated transcripts. Each time you place a new ZIP file into `1. audio/`, the script overwrites the previous transcript with a new one based on the latest recording.

## `3. summaries/`
This folder contains the final story summaries generated from the transcripts. The pipeline writes the newest summary here, but it also uses the *previous* summary stored in this folder as continuity context. This allows the system to maintain narrative coherence across sessions.

## In the main folder `./`

### `main.py`
You can directly used the script, it is using the two below scripts : these two steps allow you to automatically generate a running narration of your roleplay adventure.

### 1. `audioToTranscript.py`

* Takes Craig’s downloaded ZIP file containing multiple audio tracks.
* Extracts each voice track and transcribes it locally (Whisper).
* Reconstructs the session chronologically.
* Produces a complete transcript file containing every spoken line.

### 2. `transcriptToSummary.py`

* Takes the raw transcript generated by the first script.
* Uses ChatGPT to convert it into a structured, readable summary.
* Integrates contextual worldbuilding and past events via reference files stored in `0. gameinfo/`.


### `.env`
This file contains variables for two scripts. For the requirements, you only need to set the language and your OpenAI key. 
* `OPENAI_API_KEY=...` [OpenAI/ChatGPT API key](https://platform.openai.com/docs/quickstart/step-2-set-up-your-api-key)
* `TARGET_LANG=en`

---

## Folder Structure

```
project/
│
├── 0. gameInfo/
│ ├── Context.txt # Worldbuilding, characters, rules, universe details
│ ├── SummaryFromStory.txt # Recap of previous sessions (used as continuity context)
│ └── prompt.txt # Customizable prompt sent to ChatGPT for summary generation
│
├── 1. audio/ # Craig ZIP audio files (only the most recent is processed)
│
├── 2. transcripts/ # Transcripts generated from the latest ZIP file
│
├── 3. summaries/ # Summaries generated from transcripts; last one also used as context
│
├── main.py # Main entry point of the pipeline
├── audioToTranscript.py # Converts Craig audio ZIP into a transcript
├── transcriptToSummary.py # Converts a transcript into a structured narrative summary
│
└── .env # Contains ChatGPT API key and language configuration
```

---

## Notes

- The more detailed your context and previous summaries are, the better the generated summaries.  
- You can customize the prompt in `0. gameInfo/prompt.txt` to adjust the tone or style of the summaries (e.g., Shakespearean, modern, epic).  
- Transcription is fully local; only the summary generation requires the OpenAI API key.  
- Only the most recently added ZIP file in `1. audio/` is processed.  

---

## Purpose

This project provides an automated, reproducible way to:

- Save every spoken line from your RPG sessions  
- Maintain a chronological archive of transcripts  
- Build clear, narrative summaries of your adventure  
- Avoid manual note-taking and focus on roleplay  

Enjoy your automated storytelling workflow!
